@* Copyright (c) Microsoft. All rights reserved. *@
@using Microsoft.AspNetCore.Components.AI
@using Microsoft.Agents.AI
@using Microsoft.Extensions.DependencyInjection
@inject IServiceProvider ServiceProvider

<PageTitle>Agentic Chat</PageTitle>

<div class="chat-layout">
    <div class="chat-header">
        <div class="chat-title">AGUI WebChat</div>
        <button class="new-chat-button" @onclick="ResetConversationAsync">
            <span class="button-icon">+</span> New chat
        </button>
    </div>

    <AgentBoundary Agent="@agent">
        <div class="chat-content">
            <Messages />
        </div>
        
        <div class="chat-input-container">
            <AgentSuggestions Suggestions="@suggestions" />
            <AgentInput Placeholder="Type your message..." />
        </div>
    </AgentBoundary>
</div>

@code {
    private AIAgent? agent;
    private string[] suggestions = ["Change background", "Generate sonnet"];

    [Parameter]
    public string ScenarioId { get; set; } = "agentic_chat";

    protected override void OnInitialized()
    {
        agent = ServiceProvider.GetRequiredKeyedService<AIAgent>("agentic-chat");
    }

    private void ResetConversationAsync()
    {
        // Reset would need to be implemented in AgentBoundary
        StateHasChanged();
    }
}
